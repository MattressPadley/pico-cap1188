# Generated by scripts/setup-clangd.sh
# Run 'just setup-clangd' to regenerate

CompileFlags:
  # Use the existing compile_commands.json
  CompilationDatabase: build/
  
  # Add ARM-specific system includes (auto-detected)
  Add:
    # Target triple for ARM cross-compilation
    - --target=arm-none-eabi
    - -isystem/Applications/ArmGNUToolchain/14.2.rel1/arm-none-eabi/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/include/c++/14.2.1
    - -isystem/Applications/ArmGNUToolchain/14.2.rel1/arm-none-eabi/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/include/c++/14.2.1/arm-none-eabi/thumb/v6-m/nofp
    - -isystem/Applications/ArmGNUToolchain/14.2.rel1/arm-none-eabi/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/include/c++/14.2.1/backward
    - -isystem/Applications/ArmGNUToolchain/14.2.rel1/arm-none-eabi/bin/../lib/gcc/arm-none-eabi/14.2.1/include
    - -isystem/Applications/ArmGNUToolchain/14.2.rel1/arm-none-eabi/bin/../lib/gcc/arm-none-eabi/14.2.1/include-fixed
    - -isystem/Applications/ArmGNUToolchain/14.2.rel1/arm-none-eabi/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/include
    
    # ARM Cortex-M0+ specific flags
    - -mcpu=cortex-m0plus
    - -mthumb
    - -mfloat-abi=soft
    - -march=armv6s-m
    
    # Embedded-specific defines
    - -DPICO_BUILD=1
    - -DPICO_ON_DEVICE=1
    - -DPICO_RP2040=1
    - -DCAP1188_VERSION_MAJOR=0
    - -DCAP1188_VERSION_MINOR=0
    - -DCAP1188_VERSION_PATCH=1
    
    # C++ standard
    - -std=gnu++17
    
    # Disable exceptions and RTTI for embedded
    - -fno-exceptions
    - -fno-rtti

  # Remove problematic flags that clang doesn't understand
  Remove:
    - -mlibarch=*
    - -Wno-psabi
    - -fno-unwind-tables
    - -fno-use-cxa-atexit
    - -ffunction-sections
    - -fdata-sections

# Configure clang-tidy
Diagnostics:
  # Disable some diagnostics that are not relevant for embedded
  Suppress:
    - misc-non-private-member-variables-in-classes
    - readability-magic-numbers
    - cppcoreguidelines-avoid-magic-numbers
    - modernize-use-trailing-return-type
    - unused-includes
    - clang-diagnostic-unused-include
    
# Index configuration
Index:
  # Use project source files
  Background: Build
